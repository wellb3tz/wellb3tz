<!DOCTYPE html>
<html>
<head>
    <title>Unum ad X Mini App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, sans-serif;
            background-color: var(--tg-theme-bg-color, #fff);
            color: var(--tg-theme-text-color, #000);
            margin: 0;
            padding: 16px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .category {
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--tg-theme-hint-color, #ddd);
        }

        .item:last-child {
            border-bottom: none;
        }

        .chance {
            color: var(--tg-theme-hint-color, #999);
        }

        /* –ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
        .command-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .command-button {
            background: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            border-radius: 8px;
            padding: 12px;
            font-size: 14px;
            cursor: pointer;
            text-align: center;
            transition: opacity 0.2s;
        }

        .command-button:active {
            opacity: 0.8;
        }

        .inventory-section {
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .inventory-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border-bottom: 1px solid var(--tg-theme-hint-color, #ddd);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Unum ad X</h1>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ –∫–æ–º–∞–Ω–¥ -->
        <div class="command-buttons">
            <button class="command-button" onclick="openInventory()">üéí Inventory</button>
            <button class="command-button" onclick="startMining()">‚õèÔ∏è Start Mining</button>
            <button class="command-button" onclick="openShop()">üè™ Shop</button>
            <button class="command-button" onclick="showLeaderboard()">üèÜ Leaderboard</button>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Users</h3>
                <div id="totalUsers">Loading...</div>
            </div>
            <div class="stat-card">
                <h3>Total Items</h3>
                <div id="totalItems">Loading...</div>
            </div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞) -->
        <div id="inventorySection" class="inventory-section" style="display: none;">
            <h2>Your Inventory</h2>
            <div id="inventoryItems"></div>
        </div>

        <div id="categories"></div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–º—ã Telegram
        document.documentElement.style.setProperty('--tg-theme-bg-color', tg.backgroundColor);
        document.documentElement.style.setProperty('--tg-theme-text-color', tg.textColor);
        document.documentElement.style.setProperty('--tg-theme-secondary-bg-color', tg.secondaryBackgroundColor);
        document.documentElement.style.setProperty('--tg-theme-hint-color', tg.hint_color);
        document.documentElement.style.setProperty('--tg-theme-button-color', tg.buttonColor);
        document.documentElement.style.setProperty('--tg-theme-button-text-color', tg.buttonTextColor);

        // –§—É–Ω–∫—Ü–∏–∏ –∫–æ–º–∞–Ω–¥
        function openInventory() {
            const inventorySection = document.getElementById('inventorySection');
            if (inventorySection.style.display === 'none') {
                inventorySection.style.display = 'block';
                // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const inventoryItems = document.getElementById('inventoryItems');
                inventoryItems.innerHTML = `
                    <div class="inventory-item">
                        <span>üß± Ordinary Brick</span>
                        <span>x5</span>
                    </div>
                    <div class="inventory-item">
                        <span>ü™µ Wood Log</span>
                        <span>x3</span>
                    </div>
                `;
            } else {
                inventorySection.style.display = 'none';
            }
        }

        function startMining() {
            tg.showAlert("‚õèÔ∏è Mining started! Wait for results...");
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –º–∞–π–Ω–∏–Ω–≥–∞
            setTimeout(() => {
                tg.showPopup({
                    title: "Mining Result",
                    message: "You found: üß± Ordinary Brick",
                    buttons: [{type: "ok"}]
                });
            }, 2000);
        }

        function openShop() {
            tg.showPopup({
                title: "Shop",
                message: "Shop will be available soon!",
                buttons: [{type: "ok"}]
            });
        }

        function showLeaderboard() {
            tg.showPopup({
                title: "Leaderboard",
                message: "Top Players:\n1. Player1: 1000 points\n2. Player2: 850 points\n3. Player3: 720 points",
                buttons: [{type: "ok"}]
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        async function loadData() {
            try {
                const response = await fetch('https://wellb3tz.github.io/wellb3tz/data.json');
                const data = await response.json();

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                document.getElementById('totalUsers').textContent = data.total_users;
                document.getElementById('totalItems').textContent = data.total_items;

                // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
                const categoriesContainer = document.getElementById('categories');
                categoriesContainer.innerHTML = ''; // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
                
                Object.entries(data.items_by_category).forEach(([categoryName, items]) => {
                    const categoryDiv = document.createElement('div');
                    categoryDiv.className = 'category';
                    
                    let categoryContent = `<h2>${categoryName}</h2>`;
                    items.forEach(item => {
                        categoryContent += `
                            <div class="item">
                                <span>${item.name}</span>
                                <span class="chance">${(item.chance * 100).toFixed(4)}%</span>
                            </div>
                        `;
                    });
                    
                    categoryDiv.innerHTML = categoryContent;
                    categoriesContainer.appendChild(categoryDiv);
                });
            } catch (error) {
                console.error('Error loading data:', error);
                document.getElementById('totalUsers').textContent = 'Error loading data';
                document.getElementById('totalItems').textContent = 'Error loading data';
            }
        }

        // –ó–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        loadData();
    </script>
</body>
</html>
